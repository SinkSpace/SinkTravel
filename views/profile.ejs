<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        .nav { margin-bottom: 20px; }
        .nav a { margin-right: 15px; text-decoration: none; color: #007bff; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input { padding: 8px; width: 300px; border: 1px solid #ddd; border-radius: 3px; }
        .btn { padding: 8px 15px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        .error { color: red; margin: 10px 0; }
        .tour { border: 1px solid #ddd; padding: 10px; margin: 5px 0; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="/">Главная</a>
        <a href="/catalog">Каталог</a>
        <a href="/cart">Корзина</a>
        <a href="/profile">Профиль</a>
        <a href="/logout">Выйти</a>
    </div>

    <h1>Мой профиль</h1>
    
    <div style="display: flex; gap: 40px;">
        <div>
            <h2>Информация о пользователе</h2>
            <form action="/profile/update" method="POST">
                <div class="form-group">
                    <label for="username">Имя пользователя:</label>
                    <input type="text" id="username" name="username" value="<%= user.username %>" required>
                </div>
                
                <div class="form-group">
                    <label for="currentPassword">Текущий пароль (для смены пароля):</label>
                    <input type="password" id="currentPassword" name="currentPassword">
                </div>
                
                <div class="form-group">
                    <label for="newPassword">Новый пароль:</label>
                    <input type="password" id="newPassword" name="newPassword">
                </div>
                
                <button type="submit" class="btn">Сохранить изменения</button>
            </form>
        </div>
        
        <div>
            <h2>Мои туры</h2>
            <% if (tours && tours.length > 0) { %>
                <% tours.forEach(tour => { %>
                    <div class="tour">
                        <h4><%= tour.name %></h4>
                        <p><strong>Цена:</strong> <%= tour.price %> руб.</p>
                        <p><strong>Длительность:</strong> <%= tour.duration %> дней</p>
                        <p><strong>Город:</strong> <%= tour.City.name %></p>
                        <p><strong>Отель:</strong> <%= tour.Hotel.name %></p>
                    </div>
                <% }); %>
            <% } else { %>
                <p>У вас пока нет забронированных туров</p>
                <a href="/catalog" class="btn">Посмотреть туры</a>
            <% } %>
        </div>
    </div>
</body>
</html>